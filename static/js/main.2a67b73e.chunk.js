(this["webpackJsonptweet-app"]=this["webpackJsonptweet-app"]||[]).push([[0],{112:function(e,t,a){e.exports=a(289)},117:function(e,t,a){},289:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(103),o=a.n(c),l=(a(117),a(16)),s=a(4),i=a(6);var u=function(){return r.a.createElement("header",{className:"masthead mb-auto"},r.a.createElement("div",{className:"inner"},r.a.createElement("h3",{className:"masthead-brand"},"Cover"),r.a.createElement("nav",{className:"nav nav-masthead justify-content-center"},r.a.createElement(l.NavLink,{className:"nav-link",to:"/",exact:!0},"Home"),r.a.createElement(l.NavLink,{className:"nav-link",to:"/app"},"Tweets"),r.a.createElement(l.NavLink,{className:"nav-link",to:"/profile"},"Profile"),r.a.createElement(l.NavLink,{className:"nav-link",to:"/logout"},"LogOut"))))},m=function(){return r.a.createElement("footer",{className:"mastfoot mt-auto"},r.a.createElement("div",{className:"inner"},r.a.createElement("p",null,"POC made over twitch streams on ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://rmauro.dev/twitch"},"RMauro's Twitch"),". Source code on ",r.a.createElement("a",{href:"https://github.com/ricardodemauro/TweetApp"},"Github"),".")))},p=a(5),h=a.n(p),d=a(14),f=a(15),b=a(43),E=a(105),v=function(){return r.a.createElement(E.DisappearedLoading,null)},w=function(){var e=Object(i.useOktaAuth)(),t=e.authState,a=e.authService,c=Object(n.useState)(null),o=Object(f.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(!1),m=Object(f.a)(u,2),p=m[0],E=m[1];Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isAuthenticated){e.next=5;break}s(null),E(!0),e.next=10;break;case 5:return e.next=7,a.getUser();case 7:n=e.sent,s(n),E(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}),[t,a]);var w=function(){var e=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isAuthenticated){e.next=4;break}console.log("you`re already logged in. Do nothing"),e.next=6;break;case 4:return e.next=6,a.login("/");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("main",{role:"main",className:"inner cover"},r.a.createElement("div",{className:"lead"},!p&&r.a.createElement(v,null),p&&l&&r.a.createElement("p",null,"Welcome back, ",l.name,"!"),p&&!l&&r.a.createElement(b.a,{onClick:w,className:"btn btn-lg btn-secondary"},"Login with OKTA")))},g=a(109),k=function(e){var t=e.name;return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"36",height:"36"},r.a.createElement("circle",{cx:"25",cy:"25",r:"20",stroke:"black",strokeWidth:"1",fill:"#343a40"}),r.a.createElement("text",{x:"13.5",y:"30",className:"textSvg",fill:"white"},t?t.substring(0,2).toUpperCase():"??"))},N=function(e){return r.a.createElement("span",null,"@".concat(e.name))},x=function(e){return r.a.createElement("span",{className:"text-dark"},e.tweet)},O=function(e){var t=e.image,a=e.name,n=(e.handle,e.tweet);return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{name:a,image:t}),r.a.createElement("div",{className:"media-body px-2 text-justify"},r.a.createElement("h6",{className:"mt-0 d-block text-dark"},r.a.createElement(N,{name:a})),r.a.createElement(x,{tweet:n})))},y=function(e){var t=e.onFormSubmit,a=Object(n.useState)(""),c=Object(f.a)(a,2),o=c[0],l=c[1];return r.a.createElement("div",{className:"text-white-50 rounded shadow-sm my-3 bg-purple"},r.a.createElement("div",{className:"row p-3"},r.a.createElement("form",{className:"w-100 col-12",onSubmit:function(e){e.preventDefault(),t&&t({tweet:o}),l("")}.bind(void 0)},r.a.createElement("p",{className:"h4 mb-4"},"Submit your tweet"),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",value:o,onChange:function(e){return l(e.target.value)},"aria-describedby":"tweet",placeholder:"your tweet"})),r.a.createElement("div",{className:"row lh-100"},r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{type:"submit",className:"btn btn-primary",style:{position:"absolute",right:"15px"}},"Submit"),r.a.createElement("h6",{className:"mb-0 text-white lh-100"},"Bootstrap"),r.a.createElement("small",null,"Since 2011"))))))},j="https://".concat("okta.rmaurolabs.dev","/oauth2/default"),S=window.location.host,A="http://".concat(S).concat("/implicit/callback"),T="https://".concat(S).concat("/implicit/callback"),C={issuer:j,clientId:"0oa4gpq1oyOsCygrt357",redirectUri:window.location.href.indexOf("github.io")>-1?"https://ricardodemauro.github.io/TweetApp".concat("/implicit/callback"):window.location.protocol.indexOf("https")>-1?T:A,scope:"openid profile email".split(/\s+/)},L=function(){return window.location.href.indexOf("localhost")>-1?"http://localhost:7071/api/Tweet/":"https://tweetappapi0033.azurewebsites.net/api/tweet/"};var B=function(){var e=Object(i.useOktaAuth)(),t=e.authState,a=e.authService,c=Object(n.useState)(0),o=Object(f.a)(c,2),l=o[0],s=void 0===l?[]:l,u=o[1],m=Object(n.useState)(!1),p=Object(f.a)(m,2),b=p[0],E=p[1];function w(){return k.apply(this,arguments)}function k(){return(k=Object(d.a)(h.a.mark((function e(){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!1),e.next=3,fetch(L(),{method:"get",headers:{Authorization:"Bearer ".concat(t.accessToken),"Content-Type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,r=n.map((function(e,t){return{name:e.user,tweet:e.message}})),u(r),E(!0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(d.a)(h.a.mark((function e(a){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(L(),{method:"POST",body:JSON.stringify({message:a.tweet}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.accessToken)}});case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:return e.next=8,w();case 8:console.warn("something bad happened",n.statusText);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}),[t,a]),r.a.createElement("main",{role:"main",className:"h-auto"},r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container my-3 p-3 bg-dark rounded shadow-sm"},r.a.createElement("h1",null,"Mini Tweet"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(y,{onFormSubmit:function(e){return N.apply(this,arguments)}.bind(this)}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h6",{className:"border-bottom border-gray pb-2 mb-0"},"Recent updates"),!b&&r.a.createElement("div",{className:"col-12 mt-4"},r.a.createElement(v,null)),b&&r.a.createElement("ul",{className:"list-unstyled"},Array.isArray(s)&&Object(g.a)(s).map((function(e,t){return r.a.createElement("li",{className:"media shadow p-1 mb-2 bg-white rounded",key:t},r.a.createElement(O,e))}))))))))},R=function(){var e=Object(i.useOktaAuth)(),t=e.authState,a=e.authService;return t.isPending?r.a.createElement("div",null,"Loading authentication..."):t.isAuthenticated?r.a.createElement("h1",{className:"bg-white"},"Something"):r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return a.login("/profile")}},"Login"))},_=function(){var e=Object(i.useOktaAuth)(),t=e.authState,a=e.authService,c=Object(n.useState)(null),o=Object(f.a)(c,2),l=o[0],s=o[1];return Object(n.useEffect)((function(){t.isAuthenticated?a.getUser().then((function(e){s(e)})):s(null)}),[t,a]),r.a.createElement("main",{role:"main",className:"h-100"},r.a.createElement("div",null,l&&r.a.createElement("div",null,r.a.createElement("p",null,"Welcome back, ",l.name,"!"),r.a.createElement("p",{style:{wordBreak:"break-all"}},"Access Token, ",t.accessToken))))},P="".concat(window.location.origin,"/logout"),U=Object(s.o)((function(e){var t=e.history,a=Object(i.useOktaAuth)(),c=a.authState,o=a.authService;Object(n.useEffect)((function(){c.isAuthenticated&&Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}),[c,o]),c.isAuthenticated||t.push("/");var l=function(){var e=Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.idToken,e.next=3,o.logout("/");case 3:window.location.href="".concat(j,"/v1/logout?id_token_hint=").concat(t,"&post_logout_redirect_uri=").concat(P);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("main",{role:"main",className:"inner cover"},r.a.createElement("div",{className:"lead"},r.a.createElement(b.a,{onClick:l,className:"btn btn-lg btn-secondary"},"Logout")))}));function z(){return r.a.createElement("div",{className:"text-center",style:{height:"100%"}},r.a.createElement("div",{className:"container d-flex h-100 p-3 mx-auto flex-column"},r.a.createElement(l.BrowserRouter,null,r.a.createElement(u,null),r.a.createElement(i.Security,C,r.a.createElement(s.d,{path:"/",exact:!0,component:w}),r.a.createElement(i.SecureRoute,{path:"/app",component:B}),r.a.createElement(i.SecureRoute,{path:"/auth",component:R}),r.a.createElement(i.SecureRoute,{path:"/profile",component:_}),r.a.createElement(s.d,{path:"/implicit/callback",component:i.LoginCallback}),r.a.createElement(s.d,{path:"/logout",component:U})),r.a.createElement(m,null))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.2a67b73e.chunk.js.map