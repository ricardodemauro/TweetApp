(this["webpackJsonptweet-app"]=this["webpackJsonptweet-app"]||[]).push([[0],{103:function(e,t,a){e.exports=a(244)},108:function(e,t,a){},244:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(99),o=a.n(c),l=(a(108),a(13)),s=a(2),i=a(4);var u=function(){return r.a.createElement("header",{className:"masthead mb-auto"},r.a.createElement("div",{className:"inner"},r.a.createElement("h3",{className:"masthead-brand"},"Cover"),r.a.createElement("nav",{className:"nav nav-masthead justify-content-center"},r.a.createElement(l.NavLink,{className:"nav-link",to:"/",exact:!0},"Home"),r.a.createElement(l.NavLink,{className:"nav-link",to:"/app"},"App"),r.a.createElement(l.NavLink,{className:"nav-link",to:"/about"},"About"),r.a.createElement(l.NavLink,{className:"nav-link",to:"/profile"},"Profile"),r.a.createElement(l.NavLink,{className:"nav-link",to:"/logout"},"LogOut"))))},m=function(){return r.a.createElement("footer",{className:"mastfoot mt-auto"},r.a.createElement("div",{className:"inner"},r.a.createElement("p",null,"POC made over twitch streams on ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://rmauro.dev/twitch"},"RMauro's Twitch"),". Source code on ",r.a.createElement("a",{href:"https://github.com/ricardodemauro/TweetApp"},"Github"),".")))},p=a(3),h=a.n(p),d=a(12),f=a(16),b=a(40),v=function(){var e=Object(i.useOktaAuth)(),t=e.authState,a=e.authService,c=Object(n.useState)(null),o=Object(f.a)(c,2),l=o[0],s=o[1];Object(n.useEffect)((function(){Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}),[t,a]);var u=function(){var e=Object(d.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isAuthenticated){e.next=4;break}s(null),e.next=8;break;case 4:return e.next=6,a.getUser();case 6:n=e.sent,s(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isAuthenticated){e.next=4;break}console.log("you`re already logged in"),e.next=6;break;case 4:return e.next=6,a.login("/");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("main",{role:"main",className:"inner cover"},r.a.createElement("div",{className:"lead"},l&&r.a.createElement("p",null,"Welcome back, ",l.name,"!"),!l&&r.a.createElement(b.a,{onClick:m,className:"btn btn-lg btn-secondary"},"Login with OKTA")))},E=a(102),w=function(e){var t=e.name;return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"36",height:"36"},r.a.createElement("circle",{cx:"25",cy:"25",r:"20",stroke:"black",strokeWidth:"1",fill:"#343a40"}),r.a.createElement("text",{x:"13.5",y:"30",className:"textSvg",fill:"white"},t?t.substring(0,2).toUpperCase():"??"))},k=function(e){return r.a.createElement("span",null,"@".concat(e.name))},g=function(e){return r.a.createElement("span",{className:"text-dark"},e.tweet)},N=function(e){var t=e.image,a=e.name,n=(e.handle,e.tweet);return r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{name:a,image:t}),r.a.createElement("div",{className:"media-body px-2 text-justify"},r.a.createElement("h6",{className:"mt-0 d-block text-dark"},r.a.createElement(k,{name:a})),r.a.createElement(g,{tweet:n})))},x=function(e){var t=e.onFormSubmit,a=Object(n.useState)(""),c=Object(f.a)(a,2),o=c[0],l=c[1];return r.a.createElement("div",{className:"text-white-50 rounded shadow-sm my-3"},r.a.createElement("div",{className:"row p-3"},r.a.createElement("form",{className:"w-100 col-12",onSubmit:function(e){e.preventDefault(),console.log(o),t&&t({tweet:o}),l("")}.bind(void 0)},r.a.createElement("p",{className:"h4 mb-4"},"Submit your tweet"),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",value:o,onChange:function(e){return l(e.target.value)},"aria-describedby":"tweet",placeholder:"your tweet"})),r.a.createElement("div",{className:"row lh-100"},r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{type:"submit",className:"btn btn-primary float-right"},"Submit"),r.a.createElement("h6",{className:"mb-0 text-white lh-100"},"Bootstrap"),r.a.createElement("small",null,"Since 2011"))))))},y=function(){return window.location.href.indexOf("localhost")>-1?"http://localhost:7071/api/Tweet/":"https://tweetappapi0033.azurewebsites.net/api/tweet/"};var O=function(){var e=Object(i.useOktaAuth)(),t=e.authState,a=e.authService,c=Object(n.useState)(0),o=Object(f.a)(c,2),l=o[0],s=void 0===l?[]:l,u=o[1];function m(){return p.apply(this,arguments)}function p(){return(p=Object(d.a)(h.a.mark((function e(){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y(),{method:"get",headers:{Authorization:"Bearer ".concat(t.accessToken),"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,r=n.map((function(e,t){return{name:e.user,tweet:e.message}})),u(r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(d.a)(h.a.mark((function e(a){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y(),{method:"POST",body:JSON.stringify({message:a.tweet}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.accessToken)}});case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:return e.next=8,m();case 8:console.warn("something bad happened",n.statusText);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}),[t,a]),r.a.createElement("main",{role:"main",className:"h-auto"},r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container my-3 p-3 bg-dark rounded shadow-sm"},r.a.createElement("h1",null,"Mini Tweet"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(x,{onFormSubmit:function(e){return b.apply(this,arguments)}.bind(this)}))),r.a.createElement("h6",{className:"border-bottom border-gray pb-2 mb-0"},"Recent updates"),r.a.createElement("ul",{className:"list-unstyled"},Array.isArray(s)&&Object(E.a)(s).map((function(e,t){return r.a.createElement("li",{className:"media shadow p-1 mb-2 bg-white rounded",key:t},r.a.createElement(N,e))}))))))},j=function(){var e=Object(i.useOktaAuth)(),t=e.authState,a=e.authService;return t.isPending?r.a.createElement("div",null,"Loading authentication..."):t.isAuthenticated?r.a.createElement("h1",{className:"bg-white"},"Something"):r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return a.login("/profile")}},"Login"))},S=function(){var e=Object(i.useOktaAuth)(),t=e.authState,a=e.authService,c=Object(n.useState)(null),o=Object(f.a)(c,2),l=o[0],s=o[1];return Object(n.useEffect)((function(){t.isAuthenticated?a.getUser().then((function(e){s(e)})):s(null)}),[t,a]),r.a.createElement("main",{role:"main",className:"h-100"},r.a.createElement("div",null,l&&r.a.createElement("div",null,r.a.createElement("p",null,"Welcome back, ",l.name,"!"),r.a.createElement("p",{style:{wordBreak:"break-all"}},"Access Token, ",t.accessToken))))},A="https://".concat("dev-669728.okta.com","/oauth2/default"),T=window.location.host,C=(window.location.origin,"http://".concat(T).concat("/implicit/callback")),L="https://".concat(T).concat("/implicit/callback"),B={issuer:A,clientId:"0oa4gpq1oyOsCygrt357",redirectUri:window.location.href.indexOf("localhost")>-1?C:L,scope:"openid profile email".split(/\s+/)};console.log(B);var R=B,_="".concat(window.location.origin,"/logout"),W=Object(s.o)((function(e){var t=e.history,a=Object(i.useOktaAuth)(),c=a.authState,o=a.authService;Object(n.useEffect)((function(){c.isAuthenticated&&Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}),[c,o]),c.isAuthenticated||t.push("/");var l=function(){var e=Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.idToken,e.next=3,o.logout("/");case 3:window.location.href="".concat(A,"/v1/logout?id_token_hint=").concat(t,"&post_logout_redirect_uri=").concat(_);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("main",{role:"main",className:"inner cover"},r.a.createElement("div",{className:"lead"},r.a.createElement(b.a,{onClick:l,className:"btn btn-lg btn-secondary"},"Logout")))}));function P(){return r.a.createElement("div",{className:"text-center",style:{height:"100%"}},r.a.createElement("div",{className:"container d-flex h-100 p-3 mx-auto flex-column"},r.a.createElement(l.BrowserRouter,null,r.a.createElement(u,null),r.a.createElement(i.Security,R,r.a.createElement(s.d,{path:"/",exact:!0,component:v}),r.a.createElement(i.SecureRoute,{path:"/app",component:O}),r.a.createElement(i.SecureRoute,{path:"/auth",component:j}),r.a.createElement(i.SecureRoute,{path:"/profile",component:S}),r.a.createElement(s.d,{path:"/implicit/callback",component:i.LoginCallback}),r.a.createElement(s.d,{path:"/logout",component:W})),r.a.createElement(m,null))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[103,1,2]]]);
//# sourceMappingURL=main.748e090a.chunk.js.map